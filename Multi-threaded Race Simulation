package lab8;

public class MultiThreadedRaceSimulator {

    static final int FINISH_LINE = 30;  // distance of the race

    // Step 1: Class extending Thread
    static class Racer extends Thread {
        private String racerName;
        private int position = 0;

        public Racer(String name) {
            this.racerName = name;
        }

        // Step 2: run() method for simulating race steps
        public void run() {
            try {
                while (position < FINISH_LINE) {
                    position += (int) (Math.random() * 3) + 1; // move 1â€“3 steps
                    if (position > FINISH_LINE)
                        position = FINISH_LINE;

                    // show progress
                    System.out.println(racerName + " running... position: " + position);

                    // Step 5: use sleep() to slow progress
                    Thread.sleep((int) (Math.random() * 400) + 200);
                }

                System.out.println(">>> " + racerName + " finished the race!");
            } catch (InterruptedException e) {
                System.out.println(racerName + " was interrupted!");
            }
        }
    }

    // Step 3 & 4: create racer objects and start them together
    public static void main(String[] args) {
        System.out.println("Multi-threaded Race Simulator");
        System.out.println("-----------------------------");

        Racer racer1 = new Racer("Racer1");
        Racer racer2 = new Racer("Racer2");
        Racer racer3 = new Racer("Racer3");

        // Start all racers simultaneously
        racer1.start();
        racer2.start();
        racer3.start();

        // Wait for all racers to finish
        try {
            racer1.join();
            racer2.join();
            racer3.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        System.out.println("\nRace finished! (Output may vary)");
    }
}
